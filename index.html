<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modellflugplatz Datenbank</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; background: linear-gradient(135deg, #e0f2fe 0%, #ddd6fe 100%); min-height: 100vh; padding: 1rem; }
        .container { max-width: 1200px; margin: 0 auto; }
        .header { margin-bottom: 2rem; }
        .header h1 { font-size: 2rem; color: #1f2937; margin-bottom: 0.5rem; }
        .controls { background: white; border-radius: 0.5rem; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        label { display: block; font-weight: 600; margin-bottom: 0.5rem; font-size: 0.875rem; }
        input, select, textarea { width: 100%; padding: 0.5rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; margin-bottom: 1rem; }
        .btn { padding: 0.75rem 1.5rem; border: none; border-radius: 0.5rem; font-weight: 600; cursor: pointer; font-size: 1rem; width: 100%; margin-bottom: 0.5rem; }
        .btn-success { background: #10b981; color: white; }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-danger { background: #ef4444; color: white; }
        .grid { display: grid; gap: 1.5rem; grid-template-columns: 1fr; }
        @media (min-width: 768px) { .grid { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .grid { grid-template-columns: repeat(3, 1fr); } }
        .card { background: white; border-radius: 0.5rem; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
        .card-image { height: 12rem; background: #e5e7eb; }
        .card-image img { width: 100%; height: 100%; object-fit: cover; }
        .card-body { padding: 1rem; }
        .card-title { font-size: 1.25rem; font-weight: 700; margin-bottom: 0.75rem; }
        .card-link { display: block; color: #3b82f6; text-decoration: none; font-size: 0.875rem; margin-bottom: 0.5rem; }
        .wind-tags { display: flex; flex-wrap: wrap; gap: 0.25rem; margin: 0.5rem 0; }
        .wind-tag { background: #dbeafe; color: #1e40af; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem; }
        .notes { font-size: 0.875rem; color: #6b7280; margin: 0.5rem 0; }
        .modal { display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 1000; padding: 1rem; overflow-y: auto; }
        .modal.show { display: block; }
        .modal-content { background: white; border-radius: 0.5rem; max-width: 600px; margin: 2rem auto; padding: 1.5rem; }
        .modal-header { display: flex; justify-content: space-between; margin-bottom: 1rem; }
        .modal-title { font-size: 1.5rem; font-weight: 700; }
        .close { background: none; border: none; font-size: 1.5rem; cursor: pointer; }
        .wind-buttons { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1rem; }
        .wind-btn { padding: 0.5rem 1rem; border: 2px solid #d1d5db; background: #f3f4f6; color: #374151; border-radius: 0.5rem; cursor: pointer; }
        .wind-btn.active { background: #3b82f6; color: white; border-color: #3b82f6; }
        .btn-group { display: flex; gap: 0.5rem; }
        .btn-small { padding: 0.5rem 1rem; flex: 1; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Modellflugplatz Datenbank</h1>
            <p>Finde den perfekten Flugplatz für deine Windrichtung</p>
        </div>

        <div class="controls">
            <label>Nach Name suchen</label>
            <input type="text" id="searchInput">
            
            <label>Windrichtung filtern</label>
            <select id="windFilter">
                <option value="">Alle Windrichtungen</option>
                <option value="N">N</option>
                <option value="NO">NO</option>
                <option value="O">O</option>
                <option value="SO">SO</option>
                <option value="S">S</option>
                <option value="SW">SW</option>
                <option value="W">W</option>
                <option value="NW">NW</option>
            </select>
            
            <button class="btn btn-success" id="addBtn">Neuen Flugplatz hinzufügen</button>
        </div>

        <div id="count" style="font-weight: 600; margin-bottom: 1rem;"></div>
        <div class="grid" id="list"></div>
    </div>

    <div class="modal" id="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Neuer Flugplatz</h2>
                <button class="close" id="closeBtn">✕</button>
            </div>
            <label>Name *</label>
            <input type="text" id="name">
            <label>Standort URL *</label>
            <input type="url" id="location">
            <label>Parkplatz URL</label>
            <input type="url" id="parking">
            <label>Windrichtungen *</label>
            <div class="wind-buttons" id="windBtns"></div>
            <label>Anmerkungen</label>
            <textarea id="notes" rows="3"></textarea>
            <label>Foto URL</label>
            <input type="url" id="photo">
            <div class="btn-group">
                <button class="btn btn-success btn-small" id="saveBtn">Speichern</button>
                <button class="btn btn-danger btn-small" id="cancelBtn">Abbrechen</button>
            </div>
        </div>
    </div>

    <script>
    var data = [
        {name:"Braunsberg",location:"https://goo.gl/maps/4f7vP8n8RHQxm6Yj8",parking:"https://goo.gl/maps/4f7vP8n8RHQxm6Yj8",notes:"",photo:"https://www.sdetmi.com/assets/Uploads/Event/23385/_resampled/CroppedFocusedImageWzcwMCwzMDAsInkiLDBd/P1140303.JPG",wind:["N","SO","S","SW","W","NW"],id:"1"},
        {name:"Winden am See",location:"https://goo.gl/maps/zeA62LLuq1FoFJS4A",parking:"https://maps.app.goo.gl/K4PtfT9Hi8Wmix2Y9",notes:"",photo:"https://media.gettyimages.com/id/996196320/photo/townscape-winden-am-see-lake-neusiedl-northern-burgenland-burgenland-austria.jpg?s=1024x1024&w=gi&k=20&c=6rm9XQUfKbNsEVLNNaVKjcHP4DVquuQRL16s3QpNq8M=",wind:["SO","S"],id:"2"},
        {name:"Gebmanns",location:"https://goo.gl/maps/gAT-KtEBL7hGMNeRdgQ7",parking:"https://goo.gl/maps/gAT-KtEBL7hGMNeRdgQ7",notes:"",photo:"https://de-academic.com/pictures/dewiki/67/Castle_Ernstbrunn_01_2008.JPG",wind:["N","SO"],id:"3"},
        {name:"Göllersdorf",location:"https://maps.app.goo.gl/axGbCxSurBzS4jfg8",parking:"https://maps.app.goo.gl/axGbCxSurBzS4jfg8",notes:"",photo:"https://img2.oastatic.com/img2/21643708/max/variant.jpg",wind:["SW","W"],id:"4"},
        {name:"Oberleis",location:"https://goo.gl/maps/CaoWcceuov2oWLsAA",parking:"https://goo.gl/maps/3QtNnh3eD5C3uYZT9",notes:"",photo:"https://vcdn.bergfex.at/images/resized/profiles/detail/0e7/63d309a74400ffac79c23f8d591b60e7.jpg?1653949197",wind:["SO","S"],id:"5"},
        {name:"Waschberg",location:"https://goo.gl/maps/TsDnriEBFTmCrSSr7",parking:"https://goo.gl/maps/vJWyfFENdCjyB8WTA",notes:"",photo:"https://vcdn.bergfex.at/images/resized/ec/61609ebf726526ec_4cc9ea95bbcd4772.jpg",wind:["SW","W"],id:"6"},
        {name:"Hundsheimer Berg",location:"https://goo.gl/maps/2REqQRvRTdtcBMm37",parking:"https://goo.gl/maps/8j1PcnwmriDE9qAT-K27",notes:"",photo:"https://www.naturland-noe.at/bild.php?id=989&size=gr",wind:["SO","S","SW"],id:"7"},
        {name:"Spitzerberg",location:"https://goo.gl/maps/AGjLCtPAT-Kyqt7hWTH7",parking:"https://goo.gl/maps/AGjLCtPAT-Kyqt7hWTH7",notes:"",photo:"https://media04.meinbezirk.at/article/2016/06/29/2/4563752_XXL.jpg",wind:["N","SO","S","SW","W","NW"],id:"8"},
        {name:"Hackbichl",location:"https://goo.gl/maps/B1m1gA4ydQ6RCEeLA",parking:"https://goo.gl/maps/B1m1gA4ydQ6RCEeLA",notes:"",photo:"https://www.gps-tour.info/redx/tools/mb_image.php/ct.VZO2zQ/gid.8/file.zY2JjEFA2xSCHx7E1twm3Q_2vFBRO8ZEuG8acDkue4kbi8kOz6s6sbHJtGq76IvE0z0JuN-09vnSmAwTM91gD2y8U9GNiYw/IMG_8002_b.JPG",wind:["N","NO","O","SO","S","SW"],id:"9"},
        {name:"Sommeralm",location:"https://goo.gl/maps/EAT-KxAT-KMDJdjzoAT-K1vBc6",parking:"https://goo.gl/maps/L8AgwhAvgq6228ah8",notes:"",photo:"https://vcdn.bergfex.at/images/resized/43/0f0dd5c588fbc143_1e58547d0551d0b5.jpg",wind:["N","NO","SO","S","SW","W","NW"],id:"10"},
        {name:"Stuhleck",location:"https://goo.gl/maps/X2bncUd8174GHreN7",parking:"https://goo.gl/maps/X2bncUd8174GHreN7",notes:"",photo:"https://hautzendorfer.lima-city.de/Stuhleck/images/IMG_9879.jpg",wind:["SO","S","SW"],id:"11"},
        {name:"Wiener Hütte",location:"https://maps.app.goo.gl/51FdukWReyfFydhi8",parking:"https://maps.app.goo.gl/igriU9PuRYUUj8ER9",notes:"",photo:"https://vcdn.bergfex.at/images/resized/profiles/detail/461/4b82ad98bcd35379750d3a0b288fb461.jpg?1620128313",wind:["N","NO","O"],id:"12"},
        {name:"Tulbing",location:"https://goo.gl/maps/voDebAT-KWoYissaAES9",parking:"https://goo.gl/maps/6TMHHuzNWjHHszDv5",notes:"Betrieb unter der Woche ab 16h, Di verboten, ab Fr 14h",photo:"http://www.tulbingerkogel.at/wp-content/uploads/2018/10/outdoor_site.jpg",wind:["N","NO","NW"],id:"13"}
    ];

    var winds = ["N","NO","O","SO","S","SW","W","NW"];
    var editId = null;

    function load() {
        try {
            var s = localStorage.getItem("air");
            if (s) data = JSON.parse(s);
        } catch(e) {}
        show();
    }

    function save() {
        try {
            localStorage.setItem("air", JSON.stringify(data));
        } catch(e) {}
    }

    function show() {
        var search = document.getElementById("searchInput").value.toLowerCase();
        var wind = document.getElementById("windFilter").value;
        var list = [];
        
        for (var i = 0; i < data.length; i++) {
            var ok = true;
            if (wind && data[i].wind.indexOf(wind) === -1) ok = false;
            if (search && data[i].name.toLowerCase().indexOf(search) === -1) ok = false;
            if (ok) list.push(data[i]);
        }
        
        document.getElementById("count").textContent = list.length + " Flugplätze gefunden";
        
        var html = "";
        for (var i = 0; i < list.length; i++) {
            var a = list[i];
            html += '<div class="card">';
            if (a.photo) html += '<div class="card-image"><img src="' + a.photo + '"></div>';
            html += '<div class="card-body"><h3 class="card-title">' + a.name + '</h3>';
            html += '<a href="' + a.location + '" target="_blank" class="card-link">📍 Standort</a>';
            if (a.parking) html += '<a href="' + a.parking + '" target="_blank" class="card-link">🚗 Parkplatz</a>';
            html += '<div class="wind-tags">';
            for (var j = 0; j < a.wind.length; j++) {
                html += '<span class="wind-tag">' + a.wind[j] + '</span>';
            }
            html += '</div>';
            if (a.notes) html += '<div class="notes">' + a.notes + '</div>';
            html += '<div class="btn-group">';
            html += '<button class="btn btn-primary btn-small" onclick="edit(\'' + a.id + '\')">Bearbeiten</button>';
            html += '<button class="btn btn-danger btn-small" onclick="del(\'' + a.id + '\')">Löschen</button>';
            html += '</div></div></div>';
        }
        
        document.getElementById("list").innerHTML = html;
    }

    function openModal() {
        editId = null;
        document.getElementById("modalTitle").textContent = "Neuer Flugplatz";
        document.getElementById("name").value = "";
        document.getElementById("location").value = "";
        document.getElementById("parking").value = "";
        document.getElementById("notes").value = "";
        document.getElementById("photo").value = "";
        
        var btns = document.getElementById("windBtns").getElementsByTagName("button");
        for (var i = 0; i < btns.length; i++) {
            btns[i].className = "wind-btn";
        }
        
        document.getElementById("modal").className = "modal show";
    }

    function closeModal() {
        document.getElementById("modal").className = "modal";
    }

    function edit(id) {
        for (var i = 0; i < data.length; i++) {
            if (data[i].id === id) {
                editId = id;
                document.getElementById("modalTitle").textContent = "Flugplatz bearbeiten";
                document.getElementById("name").value = data[i].name;
                document.getElementById("location").value = data[i].location;
                document.getElementById("parking").value = data[i].parking || "";
                document.getElementById("notes").value = data[i].notes || "";
                document.getElementById("photo").value = data[i].photo || "";
                
                var btns = document.getElementById("windBtns").getElementsByTagName("button");
                for (var j = 0; j < btns.length; j++) {
                    var w = btns[j].getAttribute("data-wind");
                    btns[j].className = data[i].wind.indexOf(w) !== -1 ? "wind-btn active" : "wind-btn";
                }
                
                document.getElementById("modal").className = "modal show";
                break;
            }
        }
    }

    function saveData() {
        var name = document.getElementById("name").value.trim();
        var location = document.getElementById("location").value.trim();
        var parking = document.getElementById("parking").value.trim();
        var notes = document.getElementById("notes").value.trim();
        var photo = document.getElementById("photo").value.trim();
        
        var wind = [];
        var btns = document.getElementById("windBtns").getElementsByTagName("button");
        for (var i = 0; i < btns.length; i++) {
            if (btns[i].className.indexOf("active") !== -1) {
                wind.push(btns[i].getAttribute("data-wind"));
            }
        }
        
        if (!name || !location || wind.length === 0) {
            alert("Bitte Name, Standort und Windrichtung ausfüllen!");
            return;
        }
        
        var item = {name: name, location: location, parking: parking, notes: notes, photo: photo, wind: wind};
        
        if (editId) {
            for (var i = 0; i < data.length; i++) {
                if (data[i].id === editId) {
                    item.id = editId;
                    data[i] = item;
                    break;
                }
            }
        } else {
            item.id = Date.now().toString();
            data.push(item);
        }
        
        save();
        closeModal();
        show();
    }

    function del(id) {
        if (!confirm("Wirklich löschen?")) return;
        for (var i = 0; i < data.length; i++) {
            if (data[i].id === id) {
                data.splice(i, 1);
                break;
            }
        }
        save();
        show();
    }

    function toggleWind(w) {
        var btn = document.querySelector('[data-wind="' + w + '"]');
        if (btn.className.indexOf("active") !== -1) {
            btn.className = "wind-btn";
        } else {
            btn.className = "wind-btn active";
        }
    }

    document.getElementById("searchInput").onkeyup = show;
    document.getElementById("windFilter").onchange = show;
    document.getElementById("addBtn").onclick = openModal;
    document.getElementById("closeBtn").onclick = closeModal;
    document.getElementById("cancelBtn").onclick = closeModal;
    document.getElementById("saveBtn").onclick = saveData;

    var windHtml = "";
    for (var i = 0; i < winds.length; i++) {
        windHtml += '<button class="wind-btn" data-wind="' + winds[i] + '" onclick="toggleWind(\'' + winds[i] + '\')">' + winds[i] + '</button>';
    }
    document.getElementById("windBtns").innerHTML = windHtml;

    load();
    </script>
</body>
</html>